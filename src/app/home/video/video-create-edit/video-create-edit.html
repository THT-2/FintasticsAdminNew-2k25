<section class="add-card">
  <app-card
    [cardTitle]="videoFormControl['_id'].value ? GlobalConstant['EDIT'] + ' Video' : GlobalConstant['ADD'] + ' Video'"
    blockClass="pc-component"
    route_button=""
  >
    <div class="add-body">
      <div class="add-inner">
        <form [formGroup]="videoForm" (ngSubmit)="submit()">
          <div class="row g-3">

            <!-- Title -->
            <div class="col-md-6">
              <label class="form-label">Title <span class="req">*</span></label>
              <div class="input-group">
                <span class="input-group-text"><i class="bi bi-card-text"></i></span>
                <input type="text" class="form-control" placeholder="Title" formControlName="title" />
              </div>
              <div *ngIf="videoForm.get('title')?.touched && videoForm.get('title')?.invalid" class="text-danger">
                Title is required.
              </div>
            </div>

            <!-- Video Type -->
            <div class="col-md-6">
              <label class="form-label">Video Type <span class="req">*</span></label>
              <div class="d-flex gap-3 mt-1">
                <div class="form-check">
                  <input type="radio" class="form-check-input" id="videoLink" formControlName="videotype" [value]="'videoLink'" />
                  <label class="form-check-label" for="videoLink">Video Link</label>
                </div>
                <div class="form-check">
                  <input type="radio" class="form-check-input" id="videoFile" formControlName="videotype" [value]="'videoFile'" />
                  <label class="form-check-label" for="videoFile">Video File</label>
                </div>
              </div>
              <div *ngIf="videoForm.get('videotype')?.touched && videoForm.get('videotype')?.invalid" class="text-danger">
                Video type is required.
              </div>
            </div>

            <!-- Conditional Video Input -->
            <ng-container *ngIf="videoForm.value.videotype === 'videoLink'; else fileUpload">
              <div class="col-md-6">
                <label class="form-label">Video Link <span class="req">*</span></label>
                <div class="input-group">
                  <span class="input-group-text"><i class="bi bi-link-45deg"></i></span>
                  <input type="url" class="form-control" placeholder="Video Link" formControlName="videolink" />
                </div>
                <div *ngIf="videoForm.get('videolink')?.touched && videoForm.get('videolink')?.invalid" class="text-danger">
                  Video Link is required.
                </div>
              </div>
            </ng-container>
            <ng-template #fileUpload>
              <div class="col-md-6">
                <label class="form-label">Upload Video</label>
                <app-file-upload (getFilePath)="onVideoPathReceived($event)"></app-file-upload>
                <div *ngIf="videoFormControl['videolink']?.value" class="mt-2">
                  <app-file-preview [filePath]="videoFormControl['videolink'].value"></app-file-preview>
                </div>
              </div>
            </ng-template>

            <!-- Video Image -->
            <div class="col-md-6">
              <label class="form-label">Video Image</label>
              <app-file-upload (getFilePath)="onvideoImgPathReceived($event)"></app-file-upload>
              <div *ngIf="videoFormControl['video_img']?.value" class="mt-2">
                <app-file-preview [filePath]="videoFormControl['video_img'].value"></app-file-preview>
              </div>
            </div>

            <!-- Banner Image -->
            <div class="col-md-6">
              <label class="form-label">Banner Image</label>
              <app-file-upload (getFilePath)="onFilePathReceived($event)"></app-file-upload>
              <div *ngIf="videoFormControl['tamp_img']?.value" class="mt-2">
                <app-file-preview [filePath]="videoFormControl['tamp_img'].value"></app-file-preview>
              </div>
              <!-- <div class="position-relative d-inline-block">
                      <img width="100px" [src]="videoFormControl['icon'].value" />
                      <span class="badge bg-danger position-absolute top-0 end-0" style="cursor:pointer" (click)="removeImages('icon')">X</span>
                    </div> -->
            </div>

            <!-- Order Number -->
            <div class="col-md-6">
              <label class="form-label">Order Line Number <span class="req">*</span></label>
              <div class="input-group">
                <span class="input-group-text"><i class="bi bi-sort-numeric-down"></i></span>
                <input type="number" class="form-control" placeholder="Order Line Number" formControlName="index" />
              </div>
              <div *ngIf="videoForm.get('index')?.touched && videoForm.get('index')?.invalid" class="text-danger">
                Order Line Number is required.
              </div>
            </div>

            <!-- Description -->
            <div class="col-md-6">
              <label class="form-label">Description <span class="req">*</span></label>
              <textarea class="form-control" placeholder="Description" formControlName="description"></textarea>
              <div *ngIf="videoForm.get('description')?.touched && videoForm.get('description')?.invalid" class="text-danger">
                Description is required.
              </div>
            </div>

            <!-- Submit Button -->
            <div class="col-12 d-flex justify-content-end pt-2">
              <button type="submit" [disabled]="btnLoader" class="btn btn-cta btn-cta-wide">
                <ng-container *ngIf="btnLoader; else btnText">
                  <div class="spinner-border text-white" role="status">
                    <span class="visually-hidden">Loading...</span>
                  </div>
                </ng-container>
                <ng-template #btnText>
                  {{ videoFormControl['_id'].value ? 'Update' : 'Submit' }}
                </ng-template>
              </button>
            </div>

          </div>
        </form>
      </div>
    </div>
  </app-card>
</section>
