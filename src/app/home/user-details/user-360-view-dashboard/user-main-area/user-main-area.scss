/* =========================================================
   Tokens / Variables (use :host for component-scoped styles)
   ✅ Pastel Purple Shaded Theme
========================================================= */
:host {
  /* Core purple palette (pastel) */
  --primary: #8b5cf6;           /* pastel purple */
  --primary-dark: #7c3aed;      /* deeper purple */
  --primary-light: #e9d5ff;     /* very light lavender */

  /* Supporting (still soft / pastel) */
  // --secondary: #a78bfa;         /* lavender */
  // --danger: #fb7185;            /* soft rose */
  // --warning: #fbbf24;           /* soft amber */
  // --info: #60a5fa;              /* soft blue */


            --secondary: #10B981;
            --warning: #F59E0B;
            --info: #0EA5E9;
            --danger: #EF4444;
            --success: #22C55E;
            --dark: #1F2937;
            --light: #F5F3FF;
            --border: #DDD6FE;
            --shadow: 0 2px 8px rgba(139, 92, 246, 0.1);
            --radius: 8px;
  /* Neutrals tuned slightly warmer/purple-ish */
  --dark: #2e1065;              /* deep purple ink */
  --light: #faf5ff;             /* very light lavender */
  --gray-100: #faf5ff;          /* lavender tint */
  --gray-200: #f3e8ff;          /* light purple tint */
  --gray-300: #e9d5ff;          /* lavender */
  --gray-400: #c4b5fd;          /* soft purple */
  --gray-500: #a78bfa;          /* lavender */
  --gray-600: #7c3aed;          /* purple */
  --gray-700: #4c1d95;          /* dark purple */

  --card-shadow: 0 1px 3px 0 rgba(17, 24, 39, 0.08), 0 1px 2px 0 rgba(17, 24, 39, 0.05);
  --card-shadow-lg: 0 10px 25px -5px rgba(17, 24, 39, 0.10), 0 10px 10px -5px rgba(17, 24, 39, 0.06);
  --border-radius: 12px;
  --border-radius-sm: 8px;

  /* Milestone tokens (purple shaded) */
  --milestone-primary: #8b5cf6;
  --milestone-secondary: #a78bfa;
  --milestone-warning: #fbbf24;
  --milestone-info: #60a5fa;
  --milestone-dark: #2e1065;
  --milestone-gray-100: #faf5ff;
  --milestone-gray-200: #f3e8ff;
  --milestone-gray-400: #c4b5fd;
  --milestone-gray-600: #6d28d9;
  --milestone-border-radius: 8px;

  display: block;
}

/* =========================================================
   Base
========================================================= */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

/* =========================================================
   Main Content (mat-sidenav-content)
========================================================= */
.main-content {
  padding: 24px;
}

/* Toolbar styled like your header card */
.content-header {
  background: rgba(255, 255, 255, 0.92) !important;
  color: var(--dark) !important;
  border-radius: var(--border-radius);
  margin-bottom: 24px;
  box-shadow: var(--card-shadow);
  padding: 16px 16px;
  min-height: 88px;
  display: flex;
  align-items: center;
  border: 1px solid rgba(139, 92, 246, 0.12);
}

.header-left {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.header-title {
  font-size: 22px;
  font-weight: 800;
  color: var(--dark);
  line-height: 1.1;
}

.header-subtitle {
  color: rgba(76, 29, 149, 0.70);
  font-size: 14px;
}

.spacer {
  flex: 1 1 auto;
}

.header-actions {
  display: flex;
  gap: 12px;
}

/* Buttons (Material buttons) */
.btn {
  border-radius: var(--border-radius-sm) !important;
  font-weight: 700 !important;
}

.btn-primary {
  background: var(--primary) !important;
  color: #fff !important;
}

.btn-primary:hover {
  background: var(--primary-dark) !important;
  transform: translateY(-2px);
  box-shadow: 0 8px 18px rgba(139, 92, 246, 0.28);
}

.btn-outline {
  color: var(--primary-dark) !important;
  border: 1px solid rgba(139, 92, 246, 0.28) !important;
  background: transparent !important;
}

.btn-outline:hover {
  background: rgba(139, 92, 246, 0.06) !important;
}

/* =========================================================
   Cards / Grids
========================================================= */
.account-details-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 24px;
  margin-bottom: 24px;
}

.info-card {
  border-radius: var(--border-radius);
  box-shadow: var(--card-shadow);
  padding: 24px;
  background: rgba(255, 255, 255, 0.92);
  border: 1px solid rgba(139, 92, 246, 0.12);
}

.info-header {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 16px;
  padding-bottom: 12px;
  // border-bottom: 1px solid var(--gray-200);
}

.info-header mat-icon {
  color: var(--primary);
}

.info-header h3 {
  font-size: 16px;
  font-weight: 800;
  color: var(--dark);
}

.info-item {
  display: flex;
  justify-content: space-between;
  padding: 12px 0;
  border-bottom: 1px solid rgba(139, 92, 246, 0.12);
}

.info-item:last-child {
  border-bottom: none;
}

.info-label {
  color: rgba(76, 29, 149, 0.70);
  font-size: 14px;
}

.info-value {
  font-weight: 700;
  color: var(--dark);
  font-size: 14px;
}

.info-value.success { color: #34d399; }
.info-value.warning { color: var(--warning); }
.info-value.danger { color: var(--danger); }

/* Charts */
.charts-container {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(450px, 1fr));
  gap: 24px;
  margin-bottom: 24px;
}

.chart-card {
  border-radius: var(--border-radius);
  box-shadow: var(--card-shadow);
  padding: 24px;
  background: rgba(255, 255, 255, 0.92);
  border: 1px solid rgba(139, 92, 246, 0.12);
}

.chart-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
}

.chart-title {
  font-size: 18px;
  font-weight: 800;
  color: var(--dark);
  display: flex;
  align-items: center;
  gap: 10px;
}

.chart-title mat-icon {
  color: var(--primary);
}

.chart-legend {
  display: flex;
  gap: 16px;
  font-size: 13px;
  color: rgba(76, 29, 149, 0.70);
}

.legend-item {
  display: flex;
  align-items: center;
  gap: 6px;
}

.legend-dot {
  width: 12px;
  height: 12px;
  border-radius: 50%;
}

.chart-container {
  position: relative;
  height: 300px;
  width: 100%;
}

/* Generic cards */
.dashboard-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
  gap: 24px;
  margin-bottom: 24px;
}

.card {
  border-radius: var(--border-radius);
  box-shadow: var(--card-shadow);
  padding: 24px;
  border: 1px solid rgba(139, 92, 246, 0.10);
  transition: all 0.3s ease;
  margin-bottom: 20px;
  background: rgba(255, 255, 255, 0.92);
}

.card:hover {
  transform: translateY(-4px);
  box-shadow: var(--card-shadow-lg);
  border-color: rgba(139, 92, 246, 0.22);
}

.card-header,.card-head {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
  padding-bottom: 16px;
  border-bottom: 1px solid rgba(139, 92, 246, 0.12);
}

.card-title {
  font-size: 18px;
  font-weight: 800;
  color: var(--dark);
  display: flex;
  align-items: center;
  gap: 10px;
}

.card-title mat-icon {
  color: var(--primary);
}

.card-badge {
  border-radius: 20px !important;
  font-size: 12px;
  font-weight: 800;
}

.badge-primary {
  background: rgba(139, 92, 246, 0.12) !important;
  color: var(--primary-dark) !important;
}

.badge-warning {
  background: rgba(251, 191, 36, 0.16) !important;
  color: #92400e !important;
}

/* =========================================================
   SMS grid + progress (Material progress bar)
========================================================= */
.sms-analysis-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 20px;
  margin-top: 20px;
}

.sms-metric {
  text-align: center;
  padding: 20px;
  border-radius: var(--border-radius-sm);
  background: rgba(139, 92, 246, 0.08);
  border: 1px solid rgba(139, 92, 246, 0.12);
  box-shadow: none;
}

.sms-icon {
  width: 48px;
  height: 48px;
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto 12px;
  color: #fff;
}

.sms-icon mat-icon {
  color: #fff;
}

.sms-icon.banks { background: linear-gradient(135deg, #a78bfa, #7c3aed); }
.sms-icon.sms { background: linear-gradient(135deg, #8b5cf6, #6d28d9); }
.sms-icon.manual { background: linear-gradient(135deg, #34d399, #10b981); }
.sms-icon.whatsapp { background: linear-gradient(135deg, #34d399, #059669); }
.sms-icon.excel { background: linear-gradient(135deg, #60a5fa, #3b82f6); }

.sms-value {
  font-size: 28px;
  font-weight: 800;
  color: var(--dark);
  margin-bottom: 4px;
}

.sms-label {
  font-size: 14px;
  color: rgba(76, 29, 149, 0.70);
}

.bank-list {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-top: 16px;
  justify-content: center;
}

.bank-tag {
  border-radius: 20px !important;
  background: rgba(167, 139, 250, 0.14) !important;
  color: rgba(76, 29, 149, 0.95) !important;
  border: 1px solid rgba(167, 139, 250, 0.24);
}

.progress-bar-container {
  margin: 16px 0 0;
}

.progress-header {
  display: flex;
  justify-content: space-between;
  margin-bottom: 8px;
  font-size: 13px;
}

.progress-label {
  font-weight: 700;
  color: var(--dark);
}

.progress-percent {
  font-weight: 800;
  color: var(--primary-dark);
}

.progress-percent.success { color: #10b981; }

/* Make mat-progress-bar match your height/rounding */
:host ::ng-deep .mat-mdc-progress-bar {
  height: 8px;
  border-radius: 4px;
  overflow: hidden;
}

:host ::ng-deep .mat-mdc-progress-bar .mdc-linear-progress__buffer-bar {
  background: rgba(139, 92, 246, 0.12);
}

/* =========================================================
   SMS footer area
========================================================= */
.sms-footer {
  margin-top: 24px;
  padding-top: 16px;
  border-top: 1px solid rgba(139, 92, 246, 0.12);
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 12px;
}

.sms-footer-label {
  font-size: 13px;
  color: rgba(76, 29, 149, 0.70);
}

.sms-footer-value {
  font-weight: 700;
  color: var(--dark);
}

/* =========================================================
   Recent activity
========================================================= */
.activity-list {
  margin-top: 16px;
  display: grid;
  gap: 12px;
}

.activity-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px;
  background: rgba(139, 92, 246, 0.08);
  border-radius: var(--border-radius-sm);
  border: 1px solid rgba(139, 92, 246, 0.10);
}

.activity-icon {
  width: 32px;
  height: 32px;
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #fff;
}

.activity-icon.ok { background: #34d399; }
.activity-icon.primary { background: var(--primary); }
.activity-icon.info { background: var(--info); }

.activity-title {
  font-weight: 800;
  color: var(--dark);
  font-size: 14px;
}

.muted {
  font-size: 12px;
  color: rgba(76, 29, 149, 0.70);
}

/* Rewards */
.rewards-center {
  text-align: center;
  margin: 20px 0;
}

.rewards-value {
  font-size: 40px;
  font-weight: 900;
  color: var(--primary-dark);
  margin-bottom: 6px;
}

.rewards-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
  margin-top: 16px;
}

.rewards-subvalue {
  font-size: 24px;
  font-weight: 900;
  color: var(--dark);
}

/* =========================================================
   Animations (same as yours)
========================================================= */
@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

.card, .chart-card, .info-card {
  animation: fadeInUp 0.5s ease forwards;
}

/* =========================================================
   Responsive
========================================================= */
@media (max-width: 1200px) {
  .charts-container { grid-template-columns: 1fr; }
}

@media (max-width: 768px) {
  .dashboard-grid { grid-template-columns: 1fr; }
  .charts-container { grid-template-columns: 1fr; }
  .account-details-grid { grid-template-columns: 1fr; }

  .content-header {
    flex-direction: column;
    align-items: flex-start;
    gap: 12px;
  }

  .header-actions {
    width: 100%;
    justify-content: flex-start;
    flex-wrap: wrap;
  }

  .user-sidebar {
    width: 100%;
  }
}

/* =========================================================
   (Your duplicate sections kept, theme-adjusted)
========================================================= */

/* Account Details (Moved to Right) */
.account-details-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 24px;
  margin-bottom: 24px;
}

.info-card {
  background: rgba(255, 255, 255, 0.92);
  border-radius: var(--border-radius);
  box-shadow: var(--card-shadow);
  padding: 24px;
  border: 1px solid rgba(139, 92, 246, 0.12);
}

.info-header {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 20px;
  padding-bottom: 16px;
  // border-bottom: 1px solid var(--gray-200);
}

.info-header i {
  color: var(--primary);
  font-size: 20px;
}

.info-header h3 {
  font-size: 16px;
  font-weight: 700;
  color: var(--dark);
}

.info-item {
  display: flex;
  justify-content: space-between;
  padding: 12px 0;
  border-bottom: 1px solid rgba(139, 92, 246, 0.12);
}

.info-item:last-child {
  border-bottom: none;
}

.info-label {
  color: rgba(76, 29, 149, 0.70);
  font-size: 14px;
}

.info-value {
  font-weight: 600;
  color: var(--dark);
  font-size: 14px;
}

.info-value.success { color: #34d399; }
.info-value.warning { color: var(--warning); }
.info-value.danger { color: var(--danger); }

/* Progress Bar */
.progress-bar-container {
  margin: 16px 0;
}

.progress-header {
  display: flex;
  justify-content: space-between;
  margin-bottom: 8px;
}

.progress-label {
  font-weight: 600;
  color: var(--dark);
  font-size: 14px;
}

.progress-percent {
  font-weight: 700;
  color: var(--primary-dark);
}

.progress-bar {
  height: 8px;
  background: rgba(139, 92, 246, 0.12);
  border-radius: 4px;
  overflow: hidden;
  margin-bottom: 8px;
}

.progress-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--primary), var(--primary-dark));
  border-radius: 4px;
  width: 0;
  transition: width 1s ease;
}

/* Charts Container */
.charts-container {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(450px, 1fr));
  gap: 24px;
  margin-bottom: 24px;
}

.chart-card {
  background: rgba(255, 255, 255, 0.92);
  border-radius: var(--border-radius);
  box-shadow: var(--card-shadow);
  padding: 24px;
  border: 1px solid rgba(139, 92, 246, 0.12);
}

.chart-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
}

.chart-title {
  font-size: 18px;
  font-weight: 700;
  color: var(--dark);
  display: flex;
  align-items: center;
  gap: 10px;
}

.chart-legend {
  display: flex;
  gap: 16px;
  font-size: 13px;
}

.legend-item {
  display: flex;
  align-items: center;
  gap: 6px;
}

.legend-color {
  width: 12px;
  height: 12px;
  border-radius: 50%;
}

.charts-container {
  display: grid;
  grid-template-columns: 1fr;   /* ✅ one below one */
  gap: 24px;
  margin-bottom: 24px;
}

/* ====== Material layout: fixed sidebar + scrollable main ====== */
.dashboard-wrapper {
  height: 100vh;               /* lock layout to viewport */
  overflow: hidden;            /* prevent outer page scroll */
  background: linear-gradient(135deg, #faf5ff 0%, #f5f3ff 100%);
}

/* mat-sidenav-container must be 100% height */
:host ::ng-deep .dashboard-wrapper.mat-sidenav-container {
  height: 100%;
}

/* ✅ Sidebar fixed + scroll inside */
:host ::ng-deep mat-sidenav.user-sidebar {
  width: 320px;
}

/* this is the actual scroll container inside the sidenav */
:host ::ng-deep mat-sidenav.user-sidebar .mat-drawer-inner-container {
  height: 100%;
  overflow-y: auto;
  overflow-x: hidden;
  scrollbar-width: thin;
  scrollbar-color: rgb(219, 142, 255);
}

/* ✅ Main content scrolls (right side) */
:host ::ng-deep mat-sidenav-content.main-content {
  height: 100%;
  overflow-y: auto;
  overflow-x: hidden;
  padding: 24px;
}

/* optional: remove extra body scroll */
:host ::ng-deep body {
  overflow: hidden;
}

/* Responsive */
@media (max-width: 1200px) {
  .dashboard-wrapper {
    flex-direction: column;
  }

  .user-sidebar {
    width: 100%;
    height: auto;
    position: relative;
    border-right: none;
    border-bottom: 1px solid rgba(139, 92, 246, 0.14);
  }

  .main-content {
    margin-left: 0;
  }

  .charts-container {
    grid-template-columns: 1fr;
  }
}

@media (max-width: 768px) {
  .dashboard-grid {
    grid-template-columns: 1fr;
  }

  .charts-container {
    grid-template-columns: 1fr;
  }

  .content-header {
    flex-direction: column;
    gap: 16px;
    text-align: center;
  }

  .account-details-grid {
    grid-template-columns: 1fr;
  }
}

/* Animations */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.card, .chart-card, .info-card {
  animation: fadeInUp 0.5s ease forwards;
}

/* =========================================================
   Milestone section (pastel purple shaded)
========================================================= */
.milestone-container {
  width: 100%;
  // max-width: 600px;
  background: rgba(255, 255, 255, 0.92);
  padding: 30px;
  border-radius: 12px;
  box-shadow: var(--card-shadow);
  margin-bottom: 20px;
  border: 1px solid rgba(139, 92, 246, 0.12);
}
.tooltip-arrow {
  position: absolute;
  bottom: -6px;
  left: 50%;
  transform: translateX(-50%);
  width: 12px;
  height: 12px;
  background: white;
  border-right: 1px solid rgba(139, 92, 246, 0.14);
  border-bottom: 1px solid rgba(139, 92, 246, 0.14);
  transform: translateX(-50%) rotate(45deg);
}

.tooltip-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 8px;
  padding-bottom: 8px;
  border-bottom: 1px solid rgba(139, 92, 246, 0.10);
}

.tooltip-icon {
  width: 20px;
  height: 20px;
  border-radius: 4px;
  background: currentColor;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-size: 10px;
}

.tooltip-title {
  font-weight: 600;
  font-size: 14px;
  color: var(--milestone-dark);
  flex: 1;
}

.tooltip-status {
  font-size: 10px;
  font-weight: 600;
  padding: 2px 6px;
  border-radius: 8px;
  background: currentColor;
  color: white;
  text-transform: uppercase;
}

.tooltip-content {
  font-size: 12px;
  color: rgba(76, 29, 149, 0.70);
  line-height: 1.4;
}

/* Labels */
.milestone-label-container {
  display: flex;
  justify-content: space-between;
  margin-top: 16px;
  padding: 0 4px;
}

.milestone-label-text {
  font-size: 12px;
  color: rgba(76, 29, 149, 0.55);
  text-align: center;
  width: 60px;
}

.milestone-label-text.active {
  color: var(--milestone-dark);
  font-weight: 500;
}

/* Animation */
@keyframes milestonePulse {
  0% { box-shadow: 0 0 0 0 rgba(139, 92, 246, 0.35); }
  70% { box-shadow: 0 0 0 6px rgba(139, 92, 246, 0); }
  100% { box-shadow: 0 0 0 0 rgba(139, 92, 246, 0); }
}

.milestone-dot.completed {
  animation: milestonePulse 2s infinite;
}

/* Responsive */
@media (max-width: 640px) {
  .milestone-container {
    padding: 20px;
  }

  .milestone-tooltip {
    min-width: 140px;
  }
}

/* =========================================================
   Savings card area (keep structure, pastel purple shaded)
========================================================= */
.savings-card {
  width: 100%;
  max-width: 600px;
  background: rgba(255, 255, 255, 0.92);
  border-radius: var(--border-radius);
  box-shadow: var(--card-shadow);
  overflow: hidden;
  border: 1px solid rgba(139, 92, 246, 0.12);
}

/* Header */
.card-header {
  padding: 20px;
  background: linear-gradient(135deg, var(--primary) 0%, #b9a6ff 100%);
  color: white;
  position: relative;
  overflow: hidden;
}
.card-head {
  padding: 20px;
  // background: linear-gradient(135deg, var(--primary) 0%, #b9a6ff 100%);
  color: white;
  position: relative;
  overflow: hidden;
}

.header-top {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 20px;
}

.title-section h2 {
  font-size: 1.4rem;
  font-weight: 700;
  margin-bottom: 4px;
}

.title-section p {
  font-size: 0.85rem;
  opacity: 0.92;
}

.total-amount {
  text-align: right;
}

.total-amount .amount {
  font-size: 1.6rem;
  font-weight: 700;
}

.total-amount .label {
  font-size: 0.8rem;
  opacity: 0.9;
}

/* Stats Bar */
.stats-bar {
  display: flex;
  gap: 10px;
  margin-top: 15px;
}

.stat-item {
  flex: 1;
  background: rgba(255,255,255,0.18);
  padding: 10px;
  border-radius: var(--border-radius-sm);
  text-align: center;
  backdrop-filter: blur(10px);
}

.stat-value {
  font-size: 1.1rem;
  font-weight: 700;
  margin-bottom: 2px;
}

.stat-label {
  font-size: 0.75rem;
  opacity: 0.92;
}

/* Visualization Tabs */
.viz-tabs {
  display: flex;
  background: rgba(139, 92, 246, 0.12);
  border: 1px solid rgba(139, 92, 246, 0.16);
  border-radius: 10px;
  padding: 4px;
  margin-top: 15px;
  gap: 4px;
}

.viz-tab {
  flex: 1;
  padding: 8px 12px;
  border: none;
  background: transparent;
  color: rgba(76, 29, 149, 0.85); /* ✅ keep visible */
  border-radius: 6px;
  font-size: 0.8rem;
  font-weight: 500;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  transition: all 0.2s;
}

.viz-tab:hover {
  background: rgba(139, 92, 246, 0.12);
  color: rgba(76, 29, 149, 1);
}

.viz-tab.active {
  background: rgba(255, 255, 255, 0.92);
  color: var(--primary-dark);
  box-shadow: 0 8px 18px rgba(76, 29, 149, 0.10);
}

/* Content Area */
.card-content {
  padding: 20px;
}

/* Chart Visualizations */
.chart-container {
  height: 200px;
  margin: 15px 0;
  position: relative;
}

.chart-controls {
  display: flex;
  justify-content: center;
  gap: 8px;
  margin-top: 15px;
}

.control-btn {
  padding: 6px 12px;
  background: rgba(139, 92, 246, 0.08);
  border: 1px solid rgba(139, 92, 246, 0.16);
  border-radius: 6px;
  font-size: 0.75rem;
  font-weight: 500;
  color: var(--dark);
  cursor: pointer;
  transition: all 0.2s;
}

.control-btn:hover {
  background: rgba(255,255,255,0.92);
  border-color: rgba(139, 92, 246, 0.35);
}

.control-btn.active {
  background: var(--primary);
  color: white;
  border-color: var(--primary);
}

/* Legend */
.chart-legend {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  justify-content: center;
  margin-top: 15px;
}

.legend-item {
  display: flex;
  align-items: center;
  padding: 6px 10px;
  background: rgba(139, 92, 246, 0.08);
  border-radius: 20px;
  font-size: 0.75rem;
  border: 1px solid rgba(139, 92, 246, 0.12);
}

.legend-color {
  width: 12px;
  height: 12px;
  border-radius: 3px;
  margin-right: 6px;
}

/* Table */
.table-container {
  max-height: 200px;
  overflow-y: auto;
  scrollbar-width: thin;
  border-radius: var(--border-radius-sm);
  border: 1px solid rgba(139, 92, 246, 0.16);
  margin: 15px 0;
}

.compact-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 0.8rem;
}

.compact-table th {
  background: rgba(139, 92, 246, 0.08);
  padding: 12px 15px;
  text-align: left;
  font-weight: 600;
  color: var(--dark);
  position: sticky;
  top: 0;
}

.compact-table td {
  padding: 10px 15px;
  border-bottom: 1px solid rgba(139, 92, 246, 0.10);
  color: rgba(76, 29, 149, 0.75);
}

.compact-table tr:last-child td {
  border-bottom: none;
}

.compact-table tr:hover {
  background: rgba(139, 92, 246, 0.10);
}

.status {
  padding: 4px 8px;
  border-radius: 12px;
  font-size: 0.7rem;
  font-weight: 600;
}

.status-done { background: rgba(52, 211, 153, 0.14); color: #059669; }
.status-active { background: rgba(251, 191, 36, 0.16); color: #92400e; }
.status-next { background: rgba(96, 165, 250, 0.16); color: #1d4ed8; }

/* Hidden */
.hidden {
  display: none;
}

/* Footer */
.card-footer {
  padding: 15px 20px;
  background: rgba(139, 92, 246, 0.06);
  border-top: 1px solid rgba(139, 92, 246, 0.12);
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.progress-text {
  font-size: 0.85rem;
  color: rgba(76, 29, 149, 0.70);
}

.progress-text strong {
  color: var(--dark);
}

.action-btn {
  padding: 8px 16px;
  background: var(--primary);
  color: white;
  border: none;
  border-radius: var(--border-radius-sm);
  font-size: 0.85rem;
  font-weight: 600;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 6px;
  transition: all 0.2s;
}

.action-btn:hover {
  background: var(--primary-dark);
  transform: translateY(-1px);
}

/* Animations */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

.viz-content {
  animation: fadeIn 0.3s ease;
}

/* Responsive */
@media (max-width: 640px) {
  .savings-card {
    max-width: 100%;
  }

  .card-header,.card-head,
  .card-content,
  .card-footer {
    padding: 15px;
  }

  .header-top {
    flex-direction: column;
    gap: 10px;
  }

  .total-amount {
    text-align: left;
  }

  .stats-bar {
    flex-wrap: wrap;
  }

  .stat-item {
    min-width: calc(50% - 5px);
  }

  .chart-container {
    height: 180px;
  }

  .card-footer {
    flex-direction: column;
    gap: 10px;
    align-items: stretch;
  }

  .action-btn {
    width: 100%;
    justify-content: center;
  }
}






        body {
            background: linear-gradient(135deg, #F5F3FF 0%, #EDE9FE 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            font-family: 'Inter', sans-serif;
        }

        .expense-dashboard {


            width: 100%;
            max-width: 1000px;
            background: white;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            overflow: hidden;
            border: 1px solid var(--border);
        }

        /* Header */
        .expense-header {
            padding: 15px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
        }

        .expense-header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .expense-title h3 {
            font-size: 1.2rem;
            font-weight: 700;
        }

        .expense-title p {
            font-size: 0.75rem;
            opacity: 0.9;
        }

        /* Filter */
        .expense-filter-container {
            display: flex;
            background: rgba(255,255,255,0.1);
            border-radius: 6px;
            padding: 4px;
            gap: 4px;
            margin-top: 10px;
        }

        .expense-filter-btn {
            flex: 1;
            padding: 6px 8px;
            border: none;
            background: transparent;
            color: rgba(255,255,255,0.9);
            border-radius: 4px;
            font-size: 0.7rem;
            font-weight: 500;
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.2s;
        }

        .expense-filter-btn:hover {
            background: rgba(255,255,255,0.1);
        }

        .expense-filter-btn.active {
            background: white;
            color: var(--primary);
        }

        /* Custom Date Picker - Fixed display */
        .expense-date-picker {
            margin-top: 10px;
            padding: 10px;
            background: rgba(255,255,255,0.9);
            border-radius: 6px;
        }

        .expense-date-inputs {
            display: flex;
            gap: 8px;
            margin-bottom: 8px;
        }

        .expense-date-input {
            flex: 1;
            padding: 6px 8px;
            border: 1px solid var(--border);
            border-radius: 4px;
            font-size: 0.75rem;
        }

        .expense-apply-date {
            width: 100%;
            padding: 6px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 500;
            cursor: pointer;
        }

        /* Tabs */
        .expense-tabs {
            display: flex;
            overflow-x: auto;
            padding: 8px 15px;
            background: white;
            border-bottom: 1px solid var(--border);
            gap:8px;
        }

        .expense-tab {
            padding: 8px 12px;
            border: none;
            background: var(--light);
            color: var(--dark);
            border-radius: 6px;
            font-size: 0.7rem;
            font-weight: 500;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 6px;
            white-space: nowrap;
            transition: all 0.2s;
        }

        .expense-tab:hover {
            background: var(--primary-light);
        }

        .expense-tab.active {
            background: var(--primary);
            color: white;
        }

        /* Content */
        .expense-content {
            padding: 15px;
            max-height: 430px;
            overflow-y: auto;
        }

        /* Common Chart Styles */
        .expense-chart-container {
            height: 180px;
            position: relative;
            margin: 10px 0;
        }

        .expense-center-percentage {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            pointer-events: none;
        }

        .expense-percentage-value {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--primary);
            line-height: 1;
            margin-bottom: 2px;
        }

        .expense-percentage-label {
            font-size: 0.65rem;
            color: #666;
            font-weight: 500;
        }

        /* Fixed Legend Sidebar */
        .expense-legend-sidebar {
            flex: 1;
            min-width: 140px;
            max-height: 200px;
            overflow-y: auto;
            padding-right: 5px;
        }

        .expense-legend-item {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            padding: 8px 10px;
            background: var(--light);
            border-radius: 6px;
            border-left: 3px solid;
        }

        .expense-legend-color {
            width: 14px;
            height: 14px;
            border-radius: 3px;
            margin-right: 10px;
            flex-shrink: 0;
        }

        .expense-legend-text {
            flex: 1;
            font-size: 0.8rem;
            font-weight: 500;
            color: var(--dark);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .expense-legend-value {
            font-size: 0.75rem;
            color: #666;
            font-weight: 600;
            margin-left: 8px;
            flex-shrink: 0;
        }

        .expense-summary-row {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
            padding-top: 10px;
            border-top: 1px solid var(--border);
            font-size: 0.75rem;
        }

        /* Module Layout - Fixed */
        .expense-module-layout {
            display: flex;
            gap: 20px;
            align-items: flex-start;
            margin-bottom: 10px;
        }

        .expense-chart-wrapper {
            flex: 1;
            min-width: 0;
        }

        /* Budget Module */
        .expense-budget-chart-container {
            height: 220px;
            margin: 10px 0;
            position: relative;
        }

        .expense-budget-legend {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 10px;
        }

        .expense-legend-dot {
            display: flex;
            align-items: center;
            font-size: 0.7rem;
            color: #666;
        }

        .expense-dot {
            width: 10px;
            height: 10px;
            border-radius: 2px;
            margin-right: 6px;
        }

        .expense-dot-spent { background: var(--primary); }
        .expense-dot-budget { background: var(--primary-light); }

        .expense-budget-summary {
            display: flex;
            justify-content: space-between;
            padding-top: 10px;
            border-top: 1px solid var(--border);
            font-size: 0.75rem;
            flex-wrap: wrap;
            gap: 10px;
        }

        .expense-budget-stat {
            text-align: center;
            flex: 1;
            min-width: 100px;
        }

        .expense-budget-percentage {
            font-size: 1rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 2px;
        }

        .expense-budget-label {
            font-size: 0.7rem;
            color: #666;
        }

        /* Module Usage Section - Now in all modules */
        .expense-module-usage {
            margin-top: 15px;
            padding: 12px;
            background: var(--light);
            border-radius: 6px;
            text-align: center;
            border: 1px solid var(--border);
        }

        .expense-usage-label {
            font-size: 0.75rem;
            color: #666;
            margin-bottom: 4px;
            font-weight: 500;
        }

        .expense-usage-value {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--primary);
        }

        /* Footer */
        .expense-footer {
            padding: 12px 15px;
            background: var(--light);
            border-top: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .expense-footer-info {
            font-size: 0.75rem;
            color: #666;
        }

        .expense-footer-info strong {
            color: var(--dark);
        }

        .expense-refresh-btn {
            padding: 6px 12px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 500;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 4px;
            transition: all 0.2s;
        }

        .expense-refresh-btn:hover {
            background: var(--primary-dark);
        }

        /* Hidden */
        .expense-hidden {
            display: none !important;
        }

        /* Custom Scrollbar */
        .expense-content::-webkit-scrollbar,
        .expense-legend-sidebar::-webkit-scrollbar {
            width: 4px;
        }

        .expense-content::-webkit-scrollbar-track,
        .expense-legend-sidebar::-webkit-scrollbar-track {
            background: var(--light);
        }

        .expense-content::-webkit-scrollbar-thumb,
        .expense-legend-sidebar::-webkit-scrollbar-thumb {
            background: var(--border);
            border-radius: 2px;
        }

        /* Animations */
        @keyframes expenseFadeIn {
            from { opacity: 0; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .expense-module-content {
            animation: expenseFadeIn 0.3s ease;
        }



        /* ✅ Force styles to apply to dynamically injected legend elements */
:host ::ng-deep .expense-legend-sidebar {
  flex: 1;
  min-width: 140px;
  max-height: 230px;
  overflow-y: auto;
  padding-right: 5px;
}

:host ::ng-deep .expense-legend-item {
  display: flex;
  align-items: center;
  margin-bottom: 10px;
  padding: 8px 10px;
  background: var(--light);
  border-radius: 6px;
  border-left: 3px solid;
}

:host ::ng-deep .expense-legend-color {
  width: 14px;
  height: 14px;
  border-radius: 3px;
  margin-right: 10px;
  flex-shrink: 0;
}

:host ::ng-deep .expense-legend-text {
  flex: 1;
  font-size: 0.8rem;
  font-weight: 500;
  color: var(--dark);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

:host ::ng-deep .expense-legend-value {
  font-size: 0.75rem;
  color: #666;
  font-weight: 600;
  margin-left: 8px;
  flex-shrink: 0;
}

/* (optional) scrollbars for legend */
:host ::ng-deep .expense-legend-sidebar::-webkit-scrollbar {
  width: 4px;
}
:host ::ng-deep .expense-legend-sidebar::-webkit-scrollbar-track {
  background: var(--light);
}
:host ::ng-deep .expense-legend-sidebar::-webkit-scrollbar-thumb {
  background: var(--border);
  border-radius: 2px;
}
